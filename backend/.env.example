# Variables d'environnement - Backend

# Serveur
PORT=5000
NODE_ENV=production
LOG_LEVEL=info

# =====================================
# SENTRY ‚Äî Error Tracking (GRATUIT)
# =====================================
# 1. Cr√©er compte sur https://sentry.io (gratuit)
# 2. Cr√©er projet Node.js
# 3. Copier le DSN ici
# Sans cette variable ‚Üí error tracking d√©sactiv√© (app fonctionne quand m√™me)
SENTRY_DSN=https://xxxxx@oxxxxx.ingest.sentry.io/xxxxx

# Firebase Admin SDK
FIREBASE_PROJECT_ID=your-project-id
FIREBASE_CLIENT_EMAIL=firebase-adminsdk-xxxxx@your-project.iam.gserviceaccount.com
FIREBASE_PRIVATE_KEY="-----BEGIN PRIVATE KEY-----\n...\n-----END PRIVATE KEY-----\n"

# ====================================
# STRIPE - PAIEMENTS EXPRESS (‚úÖ IMPL√âMENT√â)
# ====================================
# MODE TEST (D√©veloppement - recommand√© pour commencer)
STRIPE_SECRET_KEY=sk_test_51...YOUR_SECRET_KEY_HERE
STRIPE_WEBHOOK_SECRET=whsec_...YOUR_WEBHOOK_SECRET_HERE

# MODE PRODUCTION (D√©ploiement)
# ‚ö†Ô∏è N√©cessite compte Stripe v√©rifi√© (KYC compl√©t√©)
# STRIPE_SECRET_KEY=sk_live_51...YOUR_LIVE_KEY_HERE
# STRIPE_WEBHOOK_SECRET=whsec_...YOUR_LIVE_WEBHOOK_SECRET_HERE

# üìù Configuration Stripe (√âtapes d√©taill√©es) :
# 
# √âTAPE 1 - Cr√©er compte Stripe TEST
# 1. Aller sur https://dashboard.stripe.com/register
# 2. Cr√©er un compte (email professionnel recommand√©)
# 3. ACTIVER le mode TEST (toggle en haut √† droite du dashboard)
# 
# √âTAPE 2 - R√©cup√©rer les cl√©s API
# 1. Dashboard ‚Üí Developers ‚Üí API keys
# 2. Copier "Publishable key" (pk_test_...) ‚Üí pour frontend .env.local
# 3. Copier "Secret key" (sk_test_...) ‚Üí pour backend .env (ci-dessous)
# 
# √âTAPE 3 - Configurer le webhook (CRITIQUE pour paiements)
# 1. Dashboard ‚Üí Developers ‚Üí Webhooks ‚Üí "Add endpoint"
# 2. URL webhook :
#    - Production : https://votre-domaine.com/api/v1/stripe-express/webhook
#    - Local dev : 
#      a. Installer ngrok : https://ngrok.com/download
#      b. Lancer : ngrok http 5000
#      c. URL webhook : https://<votre-id>.ngrok.io/api/v1/stripe-express/webhook
# 3. √âv√©nements √† s√©lectionner (‚ö†Ô∏è IMPORTANT - seuls ces 2 sont g√©r√©s) :
#    ‚úì payment_intent.succeeded  (paiement r√©ussi)
#    ‚úì charge.refunded          (remboursement)
# 4. Cliquer "Add endpoint"
# 5. Copier "Signing secret" (whsec_...) ‚Üí STRIPE_WEBHOOK_SECRET ci-dessous
# 
# √âTAPE 4 - Tester en local (alternative √† ngrok)
# Option A : Stripe CLI (recommand√© pour dev)
#   1. Installer : https://stripe.com/docs/stripe-cli
#   2. Lancer : stripe listen --forward-to localhost:5000/api/v1/stripe-express/webhook
#   3. Copier le webhook secret (whsec_...) affich√© dans le terminal
# Option B : ngrok (voir √âTAPE 3)
# 
# CARTES DE TEST (mode test uniquement) :
# - Succ√®s : 4242 4242 4242 4242
# - Refus : 4000 0000 0000 0002
# - 3D Secure : 4000 0027 6000 3184
# - Expiry : n'importe quelle date future (ex: 12/25)
# - CVC : n'importe quel 3 chiffres (ex: 123)
# Documentation : https://stripe.com/docs/testing

# ====================================
# STRIPE CONNECT - ONBOARDING ARTISANS (‚úÖ PHASE 2)
# ====================================
# Secret webhook pour les √©v√©nements Connect
# ‚ö†Ô∏è DIFF√âRENT du webhook Express ci-dessus
# 
# Configuration webhook Stripe Connect :
# 1. Dashboard ‚Üí Developers ‚Üí Webhooks ‚Üí "Add endpoint"
# 2. URL webhook :
#    - Production : https://votre-domaine.com/api/v1/stripe/webhook
#    - Local dev (ngrok) : https://<votre-id>.ngrok.io/api/v1/stripe/webhook
# 3. √âv√©nements √† s√©lectionner (Connect) :
#    ‚úì account.updated                    (statut compte artisan)
#    ‚úì account.application.deauthorized   (artisan d√©connecte son compte)
#    ‚úì capability.updated                 (capacit√©s paiement mises √† jour)
# 4. Copier "Signing secret" (whsec_...) ‚Üí variable ci-dessous
STRIPE_CONNECT_WEBHOOK_SECRET=whsec_...YOUR_CONNECT_WEBHOOK_SECRET_HERE

# Mapbox
MAPBOX_ACCESS_TOKEN=

# Twilio SMS (https://www.twilio.com)
# 1. Cr√©er un compte sur https://www.twilio.com/try-twilio (essai gratuit $15)
# 2. R√©cup√©rer Account SID, Auth Token et Phone Number depuis le dashboard
# 3. Ajouter les credentials ci-dessous
TWILIO_ACCOUNT_SID=ACxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
TWILIO_AUTH_TOKEN=your_auth_token_here
TWILIO_PHONE_NUMBER=+15551234567

# Cloudinary
CLOUDINARY_CLOUD_NAME=
CLOUDINARY_API_KEY=
CLOUDINARY_API_SECRET=

# CORS
ALLOWED_ORIGINS=http://localhost:3000,http://localhost:3001
# ====================================
# CONFIGURATION EMAIL (SMTP)
# ====================================
# ‚ö†Ô∏è IMPORTANT - CONFIGURATION TEMPORAIRE
# 
# STATUT ACTUEL : En attente achat domaine artisandispo.fr
# 
# Configuration temporaire (d√©veloppement/tests) :
# - Utiliser votre email personnel Gmail/Outlook
# - Cr√©er "Mot de passe d'application" (pas votre mot de passe principal)
# 
# Configuration future (apr√®s achat domaine) :
# - Cr√©er support@artisandispo.fr (Google Workspace recommand√©)
# - Voir docs/TODO_CONFIGURATION_DOMAINE_EMAIL.md pour d√©tails complets

# SMTP Configuration (Gmail exemple)
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
# ‚ö†Ô∏è TEMPORAIRE - Votre email personnel actuel
# √Ä remplacer par support@artisandispo.fr apr√®s achat domaine
SMTP_USER=votre.email.actuel@gmail.com
# Cr√©er un "Mot de passe d'application" Gmail (pas votre mot de passe principal)
# Google Account ‚Üí S√©curit√© ‚Üí Validation 2 √©tapes ‚Üí Mots de passe d'application
SMTP_PASSWORD=votre_mot_de_passe_application_gmail

# Email Admin (re√ßoit notifications tickets support, alertes syst√®me)
# ‚ö†Ô∏è TEMPORAIRE - Votre email personnel actuel
# √Ä remplacer par admin@artisandispo.fr apr√®s achat domaine
ADMIN_EMAIL=votre.email.actuel@gmail.com

# Email Support (exp√©diteur tickets support)
# ‚ö†Ô∏è LAISSER VIDE pour l'instant (utilise SMTP_USER par d√©faut)
# √Ä configurer apr√®s achat domaine : support@artisandispo.fr
SUPPORT_EMAIL=

# Frontend URL (pour liens dans emails)
FRONTEND_URL=http://localhost:3000

# ====================================
# CONFIGURATION SMTP - AUTRES PROVIDERS
# ====================================
# 
# Microsoft Outlook/Office 365 :
# SMTP_HOST=smtp.office365.com
# SMTP_PORT=587
# SMTP_USER=votre.email@outlook.com
# 
# Yahoo Mail :
# SMTP_HOST=smtp.mail.yahoo.com
# SMTP_PORT=587
# SMTP_USER=votre.email@yahoo.com
# 
# SendGrid (service professionnel - 100 emails/jour gratuit) :
# SMTP_HOST=smtp.sendgrid.net
# SMTP_PORT=587
# SMTP_USER=apikey
# SMTP_PASSWORD=votre_api_key_sendgrid
# 
# Mailgun :
# SMTP_HOST=smtp.mailgun.org
# SMTP_PORT=587
# SMTP_USER=postmaster@votre-domaine.mailgun.org
# SMTP_PASSWORD=votre_password_mailgun